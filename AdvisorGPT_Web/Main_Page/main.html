<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AdvisorGPT 대시보드</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Mulish&family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="main-dashboard-container">
        <!-- Left Sidebar -->
        <aside class="sidebar left-sidebar">
            <div class="profile-section">
                <img src="../image/user_profile_default.png" alt="User Profile" class="profile-pic">
                <p class="user-nickname" id="sidebar-username">User</p>
            </div>
            <nav class="menu-section">
                <ul>
                    <li class="active"><a href="../Main_Page/main.html"><img src="../image/icon_my_today.png" alt="" class="menu-icon"> 나의 오늘</a></li>
                    <li><a href="../Health_Report/health_report.html"><img src="../image/icon_health_report.png" alt="" class="menu-icon"> 건강 리포트</a></li>
                    <li><a href="../GPT_Chatbot/gpt_chatbot.html"><img src="../image/icon_gpt_chatbot.png" alt="" class="menu-icon"> GPT Chatbot</a></li>
                    <li><a href="../Settings_Page/settings.html"><img src="../image/icon_settings.png" alt="" class="menu-icon"> 설정</a></li>
                </ul>
            </nav>
            <div class="logo-section">
                <img src="../image/AdvisorGPT_Logo_big.png" alt="AdvisorGPT Logo" class="advisor-logo">
            </div>
        </aside>

        <!-- Center Content -->
        <main class="main-content">
            <header class="welcome-header">
                <h1>환영합니다, <span id="main-username">User</span>!</h1>
            </header>
            <section class="health-summary">
                <div class="summary-title-container">
                    <h2>오늘의 건강 점수는...</h2>
                </div>
                <div class="scores-container">
                    <div class="main-score-block">
                        <span id="health-score-value">--</span>
                        <span class="unit">점</span>
                    </div>
                    <div class="detailed-scores-block">
                        <div class="score-item">
                            <img src="../image/icon_sleep_moon_right.png" alt="Sleep" class="score-icon">
                            <div class="score-text">
                                <span class="score-label">수면</span>
                                <span id="display-sleep-hours">--</span> 시간 <span id="display-sleep-mins">--</span> 분
                            </div>
                        </div>
                        <div class="score-item">
                            <img src="../image/icon_meal_bowl_center.png" alt="Meal" class="score-icon">
                            <div class="score-text">
                                <span class="score-label">식사</span>
                                <span id="display-meal-kcal">--</span> kcal
                            </div>
                        </div>
                        <div class="score-item">
                            <img src="../image/icon_exercise_dumbbell_center.png" alt="Exercise" class="score-icon">
                            <div class="score-text">
                                <span class="score-label">운동</span>
                                <span id="display-exercise-hours">--</span> 시간 <span id="display-exercise-mins">--</span> 분
                            </div>
                        </div>
                    </div>
                    <div class="stress-score-block">
                        <img src="../image/icon_stress_head_center.png" alt="Stress Score Icon" class="score-icon-large">
                        <div class="stress-score-text">
                            <span class="score-label">스트레스 지수</span>
                            <span class="score-label-small">낮을수록 긍정적</span>
                        </div>
                        <div class="stress-score-value">
                            <span id="stress-score-value">--</span>
                            <span class="unit">점</span>
                        </div>
                    </div>  
                </div>
            </section>
            <section class="daily-feedback">
                <h2><img src="../image/icon_daily_feedback.png" alt="" class="score-icon-feedback"> 오늘의 요약 & 피드백</h2>
                <div class="feedback-grid">
                    <div class="feedback-box" id="feedback-physical-analysis">
                        <h3><img src="../image/icon_physical.png" alt="" class="feedback-icon"> 신체적 분석</h3>
                        <p id="physical-analysis-text">오늘의 기록을 입력하시면 AI가 분석을 제공합니다.</p>
                    </div>
                    <div class="feedback-box" id="feedback-physical-tips">
                        <h3><img src="../image/icon_tip.png" alt="" class="feedback-icon"> 피드백 & 팁</h3>
                        <p id="physical-tips-text">AI의 피드백과 팁이 여기에 표시됩니다.</p>
                    </div>
                    <div class="feedback-box" id="feedback-mental-analysis">
                        <h3><img src="../image/icon_mental.png" alt="" class="feedback-icon"> 정신적 분석</h3>
                        <p id="mental-analysis-text">AI의 정신적 분석이 여기에 표시됩니다.</p>
                    </div>
                    <div class="feedback-box" id="feedback-mental-tips">
                        <h3><img src="../image/icon_tip.png" alt="" class="feedback-icon"> 피드백 & 팁</h3>
                        <p id="mental-tips-text">AI의 추가적인 피드백과 팁이 여기에 표시됩니다.</p>
                    </div>
                </div>
            </section>
        </main>

        <!-- Right Sidebar -->
        <aside class="sidebar right-sidebar">
            <h3 class="right-sidebar-title">오늘의 기록</h3>
            <div class="date-display">
                <img src="../image/icon_calendar.png" alt="Calendar" class="sidebar-icon">
                <span id="current-date"></span>
            </div>
            <form id="daily-record-form">
            <div class="form-group">
                <label><img src="../image/icon_sleep_moon_right.png" alt="Sleep" class="sidebar-icon"> 수면 시간</label>
                <div class="time-inputs">
                    <input type="number" id="sleep-hours" placeholder="시간" min="0" max="23">
                    <span>시간</span>
                    <input type="number" id="sleep-mins" placeholder="분" min="0" max="59">
                    <span>분</span>
                </div>
            </div>
            <div class="form-group">
                <label><img src="../image/icon_breakfast_right.png" alt="Breakfast" class="sidebar-icon"> 식사량</label>
                <label>아침  </label>
                <div class="kcal-input">
                    <input type="number" id="meal-breakfast" placeholder="0" min="0">
                    <span>kcal</span>
                </div>
            </div>
            <div class="form-group">
                <label>점심</label>
                <div class="kcal-input">
                    <input type="number" id="meal-lunch" placeholder="0" min="0">
                    <span>kcal</span>
                </div>
            </div>
            <div class="form-group">
                <label>저녁</label>
                <div class="kcal-input">
                    <input type="number" id="meal-dinner" placeholder="0" min="0">
                    <span>kcal</span>
                </div>
            </div>
            <div class="form-group">
                <label><img src="../image/icon_strength_right.png" alt="Strength" class="sidebar-icon"> 근력 운동</label>
                <div class="time-inputs">
                    <input type="number" id="exercise-strength-hours" placeholder="시간" min="0" max="23">
                    <span>시간</span>
                    <input type="number" id="exercise-strength-mins" placeholder="분" min="0" max="59">
                    <span>분</span>
                </div>
            </div>
            <div class="form-group">
                <label><img src="../image/icon_cardio_right.png" alt="Cardio" class="sidebar-icon"> 유산소 운동</label>
                <div class="time-inputs">
                    <input type="number" id="exercise-cardio-hours" placeholder="시간" min="0" max="23">
                    <span>시간</span>
                    <input type="number" id="exercise-cardio-mins" placeholder="분" min="0" max="59">
                    <span>분</span>
                </div>
            </div>
            <div class="form-group">
                <label><img src="../image/icon_mood_right.png" alt="Mood" class="sidebar-icon"> 기분 / 스트레스</label>
                <textarea id="mood-stress-text" maxlength="500" placeholder="오늘의 기분이나 스트레스에 대해 적어주세요."></textarea>
                <small class="char-counter" id="char-counter">0/500 자</small>
            </div>
            <button type="submit" class="submit-button">기록 완료</button>
        </form>
    </aside>
    </div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Set current date
    const dateElement = document.getElementById('current-date');
    const today = new Date();
    const year = today.getFullYear();
    const month = String(today.getMonth() + 1).padStart(2, '0');
    const day = String(today.getDate()).padStart(2, '0');
    dateElement.textContent = `${year} / ${month} / ${day}`;

    // Character counter for textarea
    const moodStressText = document.getElementById('mood-stress-text');
    const charCounter = document.getElementById('char-counter');
    moodStressText.addEventListener('input', function() {
        const currentLength = moodStressText.value.length;
        charCounter.textContent = `${currentLength} /500 자`;
    });

    // Handle form submission
    const form = document.getElementById('daily-record-form');
    form.addEventListener('submit', function(event) {
        event.preventDefault(); // Prevent actual form submission

        // Get values - Sleep
        const sleepHours = parseInt(document.getElementById('sleep-hours').value) || 0;
        const sleepMins = parseInt(document.getElementById('sleep-mins').value) || 0;
        document.getElementById('display-sleep-hours').textContent = sleepHours;
        document.getElementById('display-sleep-mins').textContent = sleepMins;

        // Get values - Meals (summing up kcal)
        const bfKcal = parseInt(document.getElementById('meal-breakfast').value) || 0;
        const lunchKcal = parseInt(document.getElementById('meal-lunch').value) || 0;
        const dinnerKcal = parseInt(document.getElementById('meal-dinner').value) || 0;
        const totalKcal = bfKcal + lunchKcal + dinnerKcal;
        document.getElementById('display-meal-kcal').textContent = totalKcal;

        // Get values - Exercise (summing up time)
        const strengthHours = parseInt(document.getElementById('exercise-strength-hours').value) || 0;
        const strengthMins = parseInt(document.getElementById('exercise-strength-mins').value) || 0;
        const cardioHours = parseInt(document.getElementById('exercise-cardio-hours').value) || 0;
        const cardioMins = parseInt(document.getElementById('exercise-cardio-mins').value) || 0;
        
        let totalExerciseHours = strengthHours + cardioHours;
        let totalExerciseMins = strengthMins + cardioMins;
        totalExerciseHours += Math.floor(totalExerciseMins / 60);
        totalExerciseMins = totalExerciseMins % 60;
        document.getElementById('display-exercise-hours').textContent = totalExerciseHours;
        document.getElementById('display-exercise-mins').textContent = totalExerciseMins;

        // Set fixed scores as per request
        document.getElementById('health-score-value').textContent = '82';
        document.getElementById('stress-score-value').textContent = '75';
        
        // Update nickname in main content if it's dynamic later (currently static)
        // const nickname = document.getElementById('sidebar-username').textContent;
        // document.getElementById('main-username').textContent = nickname;


        // Update feedback text (placeholders for now)
        document.getElementById('physical-analysis-text').textContent = "AI 분석: 수면 패턴과 식단, 운동량에 대한 신체적 분석 결과가 여기에 표시됩니다. (예: 수면시간 적절, 칼로리 섭취량 보통, 운동량 충분)";
        document.getElementById('physical-tips-text').textContent = "AI 피드백: 전반적으로 좋은 건강 상태를 유지하고 계십니다. 꾸준히 현재 생활 습관을 이어가세요. (예: 물을 충분히 마시는 것을 잊지 마세요.)";
        document.getElementById('mental-analysis-text').textContent = "AI 정신 분석: 입력하신 기분/스트레스 내용을 바탕으로 정신 건강 상태 분석 결과가 여기에 표시됩니다.";
        document.getElementById('mental-tips-text').textContent = "AI 정신 피드백: 스트레스 해소를 위한 명상이나 가벼운 산책을 추천합니다.";

        // Optionally, clear the form or give a success message
        // form.reset();
        // charCounter.textContent = '0/500 자';
        alert('오늘의 기록이 중앙 패널에 반영되었습니다!');
    });
});
</script>
</body>
</html>