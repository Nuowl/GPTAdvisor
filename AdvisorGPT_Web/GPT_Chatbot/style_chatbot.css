/* GPT_Chatbot/style_chatbot.css */

/* 챗봇 페이지의 .main-content 에만 적용될 스타일 */
/* 이 선택자는 Main_Page/style.css의 .main-content 보다 구체적이므로 우선 적용됩니다. */
/* body > div.main-dashboard-container > main.main-content.chatbot-page-container */
/* 위 선택자는 너무 길고 복잡해질 수 있으므로, HTML에서 <main> 태그에 고유 ID를 부여하고 사용하는 것이 더 좋습니다. */
/* 예: <main id="chatbot-main-content" class="main-content chatbot-page-container"> */
/* 여기서는 일단 클래스 기반으로 최대한 구체화합니다. */

div.main-dashboard-container > main.main-content.chatbot-page-container {
    flex-grow: 1;
    /* !!!! min-width: 0; !!!! */
    /* 이 속성은 flex 아이템이 내부 콘텐츠(아무리 길어도) 때문에
       자신의 flex-basis를 초과하여 늘어나 다른 flex 아이템의 공간을 침범하는 것을 방지합니다.
       이것이 왼쪽 사이드바가 줄어드는 것을 막는 가장 핵심적인 부분일 가능성이 높습니다. */
    min-width: 0; /* 이 줄이 핵심입니다! */

    display: flex; /* 이미 설정되어 있을 수 있음 */
    flex-direction: column; /* 이미 설정되어 있을 수 있음 */
    overflow: hidden; /* 이 컨테이너 자체 스크롤 방지 (자식이 스크롤) */
    padding: 15px;
    box-sizing: border-box;
    /* height: calc(100vh - 40px); /* 전체 페이지 레이아웃에 따라 필요할 수 있으나,
                                     flex-grow:1 로 부모 높이를 따라가는 것이 일반적입니다.
                                     이것이 오히려 문제를 일으킬 수도 있으니 주의. */
}

.chatbot-interface {
    background-color: #FFFFFF;
    border: 2.5px solid #3377DD;
    border-radius: 15px;
    width: 100%; /* 부모(.chatbot-page-container)의 너비를 따름 */
    flex-grow: 1; /* 부모의 사용 가능한 높이를 모두 차지 */
    display: flex;
    flex-direction: column;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    overflow: hidden; /* 내부 요소가 이 컨테이너를 넘치지 않도록 */
    box-sizing: border-box;
}

.chat-display-area {
    flex-grow: 1;
    overflow-y: auto; /* 채팅 메시지 스크롤 */
    padding: 15px 20px; /* 상하좌우 패딩 (상단 패딩을 15px로 수정) */
    display: flex;
    flex-direction: column;
    gap: 18px;
    /* overflow-x: hidden; /* 만약을 위해 가로 스크롤도 숨김 */
}

.chat-initial-logo-container {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    padding-top: 15px; /* 로고와 채팅창 상단 테두리 사이 여백 */
    padding-bottom: 15px; /* 로고와 첫 메시지 사이 여백 */
    flex-shrink: 0;
}

.chat-initial-logo {
    width: 300px;
    height: auto;
    opacity: 0.9;
}

/* Message styles */
.chat-message {
    display: flex;
    width: fit-content; /* 내용에 맞게. 단, max-width로 제한됨 */
    align-items: flex-end;
    /* max-width는 각 user/gpt 메시지에서 구체적으로 설정 */
}

.chat-message.user {
    align-self: flex-end;
    margin-left: auto;
    max-width: 70%; /* .chat-display-area 너비의 70% */
}

.chat-message.gpt {
    align-self: flex-start;
    margin-right: auto;
    max-width: 70%; /* .chat-display-area 너비의 70% (아바타 포함) */
}

.chat-message.gpt .chat-avatar {
    /* ... (이전 스타일 유지) ... */
    flex-shrink: 0;
}

.message-bubble {
    padding: 10px 15px;
    border-radius: 18px;
    line-height: 1.5;
    max-width: 100%; /* 부모(.chat-message)의 max-width를 넘지 않도록 */
    box-sizing: border-box;
    /* !!!! 중요: 긴 문자열이 부모의 너비를 깨고 나가는 것을 방지 !!!! */
    overflow: hidden; /* 버블 자체가 넘치는 것을 막고, 내부 p에서 줄바꿈 처리 */
}

.message-bubble p {
    margin: 0;
    font-size: 15px;
    word-wrap: break-word; /* 구형 브라우저 호환 */
    overflow-wrap: break-word; /* 표준: 단어 단위 줄바꿈, 긴 영어단어 등 강제 줄바꿈 */
    white-space: pre-wrap;    /* 입력된 공백 및 엔터 줄바꿈 유지 */
    /* min-width: 0; /* p 태그가 flex 아이템은 아니지만, 만약을 위해 추가해볼 수 있음 */
}

/* User message bubble style */
.chat-message.user .message-bubble {
    background-color: #3377DD;
    color: #FFFFFF;
    border-radius: 18px 18px 5px 18px;
}

/* GPT message bubble style */
.chat-message.gpt .message-bubble {
    background-color: #FFFFFF;
    color: #000000;
    border: 2.5px solid #3377DD;
    border-radius: 18px 18px 18px 5px;
}
.chat-message.gpt.error .message-bubble {
    /* ... (이전 스타일 유지) ... */
}

/* Chat input area (이전 스타일 유지) */
.chat-input-wrapper {
    padding: 10px 15px;
    flex-shrink: 0;
}
.chat-input-area {
    background-color: #FFFFFF;
    border: 2.5px solid #3377DD;
    border-radius: 25px;
    padding: 5px 5px 5px 15px;
    display: flex;
    align-items: center;
}
#chat-message-input {
    flex-grow: 1; background-color: transparent; color: #333333; border: none;
    padding: 8px 0; font-size: 15px; line-height: 1.4; resize: none; overflow-y: hidden;
    min-height: calc(1.4em + 16px); max-height: calc(2.8em + 16px);
    font-family: 'Noto Sans KR', 'Mulish', sans-serif; outline: none; box-sizing: content-box;
}
.send-button { /* ... (이전 스타일 유지) ... */ }
.send-button img { /* ... (이전 스타일 유지) ... */ }
.typing-indicator .message-bubble p span { /* ... (이전 스타일 유지) ... */ }
@keyframes typing-dots { /* ... (이전 스타일 유지) ... */ }

/* 이 파일은 챗봇 페이지 전용이므로, 사이드바 활성 상태는 Main_Page/style.css 또는 HTML의 JS에서 처리 */
