/* GPT_Chatbot/style_chatbot.css */

/* 챗봇 페이지의 .main-content 에 적용될 추가/덮어쓰기 스타일 */
.main-content.chatbot-page-container {
    padding: 15px; /* 챗봇 페이지용 패딩 (Main_Page/style.css의 패딩을 덮어씀) */
    /* min-width: 0; /* 이 규칙은 Main_Page/style.css의 .main-content로 이동 */
    /* height: calc(100vh - 40px); /* 이 부분은 삭제하고 flex-grow로 높이 관리 */
}

.chatbot-interface {
    background-color: #FFFFFF;
    border: 2.5px solid #3377DD;
    border-radius: 15px;
    width: 100%;
    height: 100%; /* 부모(.chatbot-page-container)가 flex column이므로 높이 100% 사용 */
    display: flex;
    flex-direction: column;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    overflow: hidden; /* 내부 chat-display-area가 스크롤 담당 */
    box-sizing: border-box;
}

.chat-display-area {
    flex-grow: 1; /* 사용 가능한 수직 공간을 모두 차지 */
    overflow-y: auto; /* 내용이 넘치면 스크롤 */
    padding: 15px 20px; /* 내부 패딩 (상단 0px에서 15px로 변경) */
    display: flex;
    flex-direction: column;
    gap: 18px;
}

.chat-initial-logo-container {
    display: flex;
    justify-content: center;
    align-items: flex-start; /* 로고를 위쪽에 배치 */
    padding-top: 15px; /* 로고와 채팅창 상단 테두리 사이 여백 */
    padding-bottom: 15px; /* 로고와 첫 메시지 사이 여백 */
    flex-shrink: 0; /* 로고 영역은 줄어들지 않도록 */
}

.chat-initial-logo {
    width: 300px;
    height: auto;
    opacity: 0.9;
}

/* Message styles */
.chat-message {
    display: flex;
    width: fit-content; /* 내용에 맞게 너비 조절 */
    /* !!!! 각 메시지 타입별로 최대 너비를 좀 더 명확히/작게 설정 !!!! */
    /* 이 max-width는 .chat-display-area 내부에서의 비율 또는 고정값이어야 함 */
    align-items: flex-end;
}

.chat-message.user {
    align-self: flex-end;
    margin-left: auto;
    max-width: 70%; /* .chat-display-area 너비의 70% */
}

.chat-message.gpt {
    align-self: flex-start;
    margin-right: auto;
    max-width: 70%; /* .chat-display-area 너비의 70% (아바타 포함 전체) */
}

.chat-message.gpt .chat-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    border: 2.0px solid #3377DD;
    margin-right: 10px;
    object-fit: contain;
    padding: 3px;
    background-color: #fff;
    flex-shrink: 0;
    box-sizing: border-box;
}

.message-bubble {
    padding: 10px 15px;
    border-radius: 18px;
    line-height: 1.5;
    max-width: 100%; /* 부모(.chat-message)의 max-width를 넘지 않도록 함 */
    box-sizing: border-box;
    /* overflow-wrap 과 white-space 는 p 태그에서 처리 */
}

.message-bubble p {
    margin: 0;
    font-size: 15px;
    word-wrap: break-word;
    overflow-wrap: break-word;
    white-space: pre-wrap;
}

/* User message bubble style */
.chat-message.user .message-bubble {
    background-color: #3377DD;
    color: #FFFFFF;
    border-radius: 18px 18px 5px 18px;
}

/* GPT message bubble style */
.chat-message.gpt .message-bubble {
    background-color: #FFFFFF;
    color: #000000;
    border: 2.5px solid #3377DD;
    border-radius: 18px 18px 18px 5px;
}
.chat-message.gpt.error .message-bubble {
    border-color: #D32F2F;
    background-color: #FFEBEE;
    color: #C62828;
}

/* Chat input area */
.chat-input-wrapper {
    padding: 10px 15px;
    flex-shrink: 0; /* 입력 영역은 줄어들지 않음 */
}

.chat-input-area {
    background-color: #FFFFFF;
    border: 2.5px solid #3377DD;
    border-radius: 25px;
    padding: 5px 5px 5px 15px;
    display: flex;
    align-items: center;
}

#chat-message-input {
    flex-grow: 1;
    background-color: transparent;
    color: #333333;
    border: none;
    padding: 8px 0;
    font-size: 15px;
    line-height: 1.4;
    resize: none;
    overflow-y: hidden;
    min-height: calc(1.4em + 16px);
    max-height: calc(2.8em + 16px);
    font-family: 'Noto Sans KR', 'Mulish', sans-serif;
    outline: none;
    box-sizing: content-box;
}

.send-button {
    background-color: transparent;
    border: none;
    padding: 0;
    margin-left: 8px;
    cursor: pointer;
    width: 38px;
    height: 38px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}
.send-button img {
    width: 30px;
    height: 30px;
    filter: brightness(0.7);
}
.send-button:hover img {
    filter: brightness(0.5);
}

/* Typing indicator (유지) */
.typing-indicator .message-bubble p span { display: inline-block; width: 5px; height: 5px; background-color: #3377DD; border-radius: 50%; margin: 0 1.5px; animation: typing-dots 1.3s infinite ease-in-out; }
.typing-indicator .message-bubble p span:nth-child(1) { animation-delay: 0s; }
.typing-indicator .message-bubble p span:nth-child(2) { animation-delay: 0.2s; }
.typing-indicator .message-bubble p span:nth-child(3) { animation-delay: 0.4s; }
@keyframes typing-dots { 0%, 60%, 100% { transform: translateY(0); opacity: 0.4; } 30% { transform: translateY(-4px); opacity: 1; } }

/* 사이드바 활성 상태는 Main_Page/style.css 의 규칙을 따름 */
